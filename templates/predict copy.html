<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body>
  <nav class="fixed top-0 left-0 w-full px-6 py-4 flex items-center z-50">
    <a href="/"
      class="flex items-center justify-center w-10 h-10 border border-black rounded-full bg-transparent hover:bg-black/10 transition">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="black"
        class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
      </svg>
    </a>
  </nav>

  <section
    class="bg-[url('../static/images/images2_try.png')] bg-cover bg-center h-screen w-full flex justify-center items-center px-6">
    <div
      class="relative mt-7 bg-white w-full max-w-xl rounded-3xl shadow-xl p-8 flex flex-col items-center border-t-8 border-red-600 overflow-hidden transform transition duration-300 hover:scale-[1.02] animate-fadeIn">

      <!-- Ornamen Garis -->
      <div class="flex gap-1 mb-6 relative z-10">
        <div class="w-8 h-2 bg-red-600 rounded"></div>
        <div class="w-8 h-2 bg-gray-300 rounded"></div>
      </div>

      <!-- Judul -->
      <h1 class="text-gray-900 font-bold text-2xl sm:text-3xl text-center mb-6 relative z-10">
        Klasifikasi Makanan Khas
        <span class="text-red-600">Indonesia</span>
      </h1>

      <!-- Form -->
      <form action="/predict" method="POST" enctype="multipart/form-data"
        class="w-full flex flex-col gap-4 relative z-10">

        <label class="block text-gray-700 font-medium">
          Masukkan Gambar yang Akan Diprediksi
        </label>

        <!-- Input File -->
        <input id="fileInput" name="file" type="file" accept=".png, .jpg, .jpeg"
          class="w-full border h-14 border-gray-300 rounded-lg p-3 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-red-500 transition">

        <!-- Preview -->
        <div id="previewContainer"
          class="w-full h-64 border-2 border-red-400 rounded-lg overflow-hidden bg-gray-100 flex justify-center items-center relative">
          <span id="placeholderText" class="text-gray-400 text-sm">Belum ada gambar</span>
          <img id="previewImage" src="" alt="Preview" class="max-h-full max-w-full object-contain hidden">
          <button type="button" id="removeImageBtn"
            class="hidden absolute top-2 right-2 bg-red-600 text-white w-7 h-7 rounded-full flex justify-center items-center text-sm hover:bg-red-700 transition">
            ✕
          </button>
        </div>

        <!-- Submit -->
        <button type="submit"
          class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition duration-300">
          Submit
        </button>
      </form>

      <!-- Dropdown di pojok kanan bawah -->
      <div class="absolute bottom-4 right-4 w-[200px] border border-gray-300 rounded-[15px] shadow-lg bg-white overflow-hidden">
        <!-- Header -->
        <div class="bg-red-600 text-white p-2 text-center font-bold text-sm">
          Pilih Model
        </div>

        <div class="relative">
          <div class="flex items-center justify-between px-3 py-2">
            <span id="selectedModel" class="font-medium text-sm">EffnetB0</span>
            <button id="dropdownButton" class="text-xl font-bold hover:opacity-70">
              ⋮
            </button>
          </div>

          <!-- Dropdown Menu -->
          <div id="modelDropdown" class="hidden bg-white border-t border-gray-200 shadow-inner text-sm">
            <div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" onclick="selectModel('EffnetB0')">EffnetB0</div>
            <div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" onclick="selectModel('ResNet50')">ResNet50</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Animasi -->
  <style>
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fadeIn {
      animation: fadeIn 0.6s ease-in-out;
    }
  </style>

  <script>
    const fileInput = document.getElementById('fileInput');
    const previewContainer = document.getElementById('previewContainer');
    const previewImage = document.getElementById('previewImage');
    const placeholderText = document.getElementById('placeholderText');
    const removeImageBtn = document.getElementById('removeImageBtn');

    fileInput.addEventListener('change', function (event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          previewImage.src = e.target.result;
          previewImage.classList.remove('hidden');
          placeholderText.classList.add('hidden');
          removeImageBtn.classList.remove('hidden');
        }
        reader.readAsDataURL(file);
      }
    });

    removeImageBtn.addEventListener('click', function (e) {
      e.preventDefault();
      fileInput.value = "";
      previewImage.src = "";
      previewImage.classList.add('hidden');
      placeholderText.classList.remove('hidden');
      removeImageBtn.classList.add('hidden');
    });

    const dropdown = document.getElementById("modelDropdown");
    const button = document.getElementById("dropdownButton");
    const selected = document.getElementById("selectedModel");

    button.addEventListener("click", function (e) {
      e.stopPropagation();
      dropdown.classList.toggle("hidden");
    });

    function selectModel(model) {
      selected.innerText = model;
      dropdown.classList.add("hidden");
    }

    document.addEventListener("click", function (e) {
      if (!button.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add("hidden");
      }
    });
  </script>
</body>
</html>
